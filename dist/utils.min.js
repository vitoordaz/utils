define("utils/credentials",["localstorage"],function(a){"use strict";return{get:function(b){if(b)a.getItem("credentials",b);else{var c=a.getItem("credentials");try{return JSON.parse(c)}catch(d){return c}}},set:function(b,c){var d=function(){chrome&&chrome.runtime&&chrome.runtime.sendMessage(chrome.runtime.id,{event:"credentials:updated"})};b=JSON.stringify(b),c?a.setItem("credentials",b,function(){c(),d()}):a.setItem("credentials",b,d)}}}),define("utils",["underscore","jquery","exports","utils/credentials"],function(a,b,c,d){"use strict";c.credentials=d,c.noop=function(){},c.getFullName=function(a,b,c){var d=[];return[a,b,c].forEach(function(a){a&&d.push(a)}),d.join(" ")},c.durationToString=function(a){var b=a.get("hours"),c=a.get("minutes"),d=a.get("seconds");return[b>9?b:"0"+b,c>9?c:"0"+c,d>9?d:"0"+d].join(":")},c.normalizePhoneNumber=function(a,b){var c=/^[a-z]+\-([\d]+)$/,d=a;b=b||"7","+"===a[0]&&(a=a.substring(1)),a=a.replace(/[\s\(\)]+/g,""),c.test(a)&&(a=a.replace(c,"$1"));var e,f,g;return/^[0-9]+$/.test(a)?a.length>=11?(e=a.substring(0,a.length-10),"8"===e&&(e=b),f=a.substring(a.length-10,a.length-7),g=a.substring(a.length-7),e+f+g):10===a.length?b+a:a:d},c.prettyPhone=function(b){return b=c.normalizePhoneNumber(b),a.isString(b)&&(b=b.replace(/\s+/g,""),/^\+?\d+$/.test(b)&&("+"===b.charAt(0)&&(b=b.substring(1)),10<=b.length&&b.length<=11&&(10===b.length&&(b+="7"+b),11===b.length&&"8"===b[0]&&(b="7"+b.substring(1)),b="+"+b[0]+" ("+b.substring(1,4)+") "+b.substring(4,7)+" "+b.substring(7,9)+" "+b.substring(9)))),b},c.generateUUID=function(){var a=(new Date).getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return b.replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===b?c:7&c|8).toString(16)})};var e=/{{\s*\S+\s*}}/g,f=/^{{\s*(\S*)\s*}}$/;c.getProperty=function(b,c){if(!a.isUndefined(c)){for(var d,e=c.split("."),f=b,g=0;g<e.length&&!a.isUndefined(f)&&!a.isNull(f);++g)d=e[g],f=a.functions(f).indexOf("get")<0?f[d]:a.isUndefined(f.get(d))&&d in f?f[d]:f.get(d);return f}},c.getStringVariables=function(b){var c=[];return b&&a.isString(b)&&a.each(b.match(e),function(a){var b=a.match(f)[1];b&&c.push(b)}),a.uniq(c.sort(),!0)},c.interpolateValueString=function(b,d){if(a.isString(d)){var e=c.getStringVariables(d);if(0===e.length)return d;var f=function(e){var f=new RegExp("{{\\s*"+e+"\\s*}}","g"),g=c.getProperty(b,e);a.isNull(g)||a.isUndefined(g)||(g=g.toString()),d=d.replace(f,g||"")};if(1!==e.length)a.each(e,f);else{var g=a.first(e),h=c.getProperty(b,g),i=new RegExp("{{\\s*"+g+"\\s*}}","g");if(d=d.replace(i,"{{"+g+"}}"),d==="{{"+g+"}}")return h;d=d.replace(i,h||"")}}return d},c.updateChromeWindowSize=function(){if(chrome&&chrome.app&&chrome.app.window){var a=chrome.app.window.current(),c=a.outerBounds.width,d=a.outerBounds.height,e=b("body"),f=e.width(),g=e.height();if(c!==f||d!==g)try{window.resizeTo(f,g)}catch(h){console.error("Unhandled exception in resizeCallWindow",h)}}}});