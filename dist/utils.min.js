define("utils/credentials",["jquery","underscore","localstorage"],function(a,b,c){"use strict";return{get:function(){var d=a.Deferred();return c.getItem("credentials",function(a){if(b.isString(a))try{d.resolve(JSON.parse(a))}catch(c){d.reject(c)}else d.resolve(a)}),d},set:function(b){var d=function(){chrome&&chrome.runtime&&chrome.runtime.id&&chrome.runtime.sendMessage(chrome.runtime.id,{event:"credentials:updated"})};b=JSON.stringify(b);var e=a.Deferred();return c.setItem("credentials",b,function(){e.resolve(),d()}),e}}}),define("utils",["underscore","jquery","Backbone","exports","utils/credentials"],function(a,b,c,d,e){"use strict";d.credentials=e,d.noop=function(){},d.getFullName=function(a,b,c){var d=[];return[a,b,c].forEach(function(a){a&&d.push(a)}),d.join(" ")},d.durationToString=function(a){var b=a.get("hours"),c=a.get("minutes"),d=a.get("seconds");return[b>9?b:"0"+b,c>9?c:"0"+c,d>9?d:"0"+d].join(":")},d.normalizePhoneNumber=function(a,b){var c=/^[a-z]+\-([\d]+)$/,d=a;b=b||"7","+"===a[0]&&(a=a.substring(1)),a=a.replace(/[\s\(\)]+/g,""),c.test(a)&&(a=a.replace(c,"$1"));var e,f,g;return/^[0-9]+$/.test(a)?a.length>=11?(e=a.substring(0,a.length-10),"8"===e&&(e=b),f=a.substring(a.length-10,a.length-7),g=a.substring(a.length-7),e+f+g):10===a.length?b+a:a:d},d.prettyPhone=function(b){return b=d.normalizePhoneNumber(b),a.isString(b)&&(b=b.replace(/\s+/g,""),/^\+?\d+$/.test(b)&&("+"===b.charAt(0)&&(b=b.substring(1)),10<=b.length&&b.length<=11&&(10===b.length&&(b+="7"+b),11===b.length&&"8"===b[0]&&(b="7"+b.substring(1)),b="+"+b[0]+" ("+b.substring(1,4)+") "+b.substring(4,7)+" "+b.substring(7,9)+" "+b.substring(9)))),b},d.generateUUID=function(){var a=(new Date).getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return b.replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===b?c:7&c|8).toString(16)})};var f=/{{\s*\S+\s*}}/g,g=/^{{\s*(\S*)\s*}}$/;d.setProperty=function(b,d,e){var f=d.split(".");a.each(f.slice(0,f.length-1),function(d){b instanceof c.Model?a.isUndefined(b[d])?(a.isUndefined(b.get(d))&&b.set(d,{}),b=b.get(d)):b=b[d]:(a.isUndefined(b[d])&&(b[d]={}),b=b[d])}),b instanceof c.Model?b.set(a.last(f),e):b[a.last(f)]=e},d.getProperty=function(b,d){if(!a.isUndefined(d)){for(var e,f,g=d.split("."),h=b,i=0;i<g.length&&!a.isUndefined(h)&&!a.isNull(h);++i)e=g[i],h instanceof c.Model?h=a.isUndefined(h.get(e))&&e in h?h[e]:h.get(e):h instanceof c.Collection?(f=parseInt(e),h=a.isNaN(f)?a.isUndefined(h.get(e))&&e in h?h[e]:h.get(e):h.at(f)):h=h[e];return h}},d.getStringVariables=function(b){var c=[];return b&&a.isString(b)&&a.each(b.match(f),function(a){var b=a.match(g)[1];b&&c.push(b)}),a.uniq(c.sort(),!0)},d.interpolateValueString=function(b,c){if(a.isString(c)){var e=d.getStringVariables(c);if(0===e.length)return c;var f=function(e){var f=new RegExp("{{\\s*"+e+"\\s*}}","g"),g=d.getProperty(b,e);a.isNull(g)||a.isUndefined(g)||(g=g.toString()),c=c.replace(f,g||"")};if(1!==e.length)a.each(e,f);else{var g=a.first(e),h=d.getProperty(b,g),i=new RegExp("{{\\s*"+g+"\\s*}}","g");if(c=c.replace(i,"{{"+g+"}}"),c==="{{"+g+"}}")return h;c=c.replace(i,h||"")}}return c},d.updateChromeWindowSize=function(){if(chrome&&chrome.app&&chrome.app.window){var a=chrome.app.window.current(),c=a.outerBounds.width,d=a.outerBounds.height,e=b("body"),f=e.width(),g=e.height();if(c!==f||d!==g)try{window.resizeTo(f,g)}catch(h){console.error("Unhandled exception in resizeCallWindow",h)}}}});