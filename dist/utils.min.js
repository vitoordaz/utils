define("localstorage",[],function(){"use strict";var a=function(a){var b=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return a.apply(null,b)},1)},b=function(){},c=!1,d={},e=(!!window.localStorage,window.chrome&&chrome.storage&&chrome.storage.local);return e?{init:function(a){chrome.storage.local.get(null,function(b){d=b,c=!0,a()})},clear:function(a){if(!c)throw Error("localstorage.init was not called");a=a||b,chrome.storage.local.clear(a),d={}},setItem:function(a,e,f){if(!c)throw Error("localstorage.init was not called");f=f||b;var g={};g[a]=e,chrome.storage.local.set(g,f),d[a]=e},getItem:function(a,e){if(!c)throw Error("localstorage.init was not called");return e=e||b,chrome.storage.local.get(a,function(b){d[a]=b[a],e(b[a])}),d[a]},removeItem:function(a,e){if(!c)throw Error("localstorage.init was not called");e=e||b,chrome.storage.local.remove([a],e),delete d[a]}}:{init:a,clear:localStorage.clear,setItem:localStorage.setItem,getItem:localStorage.getItem,removeItem:localStorage.removeItem}}),define("utils/credentials",["localstorage"],function(a){"use strict";return{get:function(b){if(b)a.getItem("credentials",b);else{var c=a.getItem("credentials");try{return JSON.parse(c)}catch(d){return c}}},set:function(b,c){var d=function(){chrome&&chrome.runtime&&chrome.runtime.sendMessage(chrome.runtime.id,{event:"credentials:updated"})};b=JSON.stringify(b),c?a.setItem("credentials",b,function(){c(),d()}):a.setItem("credentials",b,d)}}}),define("utils",["underscore","jquery","exports","utils/credentials"],function(a,b,c,d){"use strict";c.credentials=d,c.noop=function(){},c.getFullName=function(a,b,c){var d=[];return[a,b,c].forEach(function(a){a&&d.push(a)}),d.join(" ")},c.durationToString=function(a){var b=a.get("hours"),c=a.get("minutes"),d=a.get("seconds");return[b>9?b:"0"+b,c>9?c:"0"+c,d>9?d:"0"+d].join(":")},c.normalizePhoneNumber=function(a,b){var c=/^[a-z]+\-([\d]+)$/,d=a;b=b||"7","+"===a[0]&&(a=a.substring(1)),a=a.replace(/[\s\(\)]+/g,""),c.test(a)&&(a=a.replace(c,"$1"));var e,f,g;return/^[0-9]+$/.test(a)?a.length>=11?(e=a.substring(0,a.length-10),"8"===e&&(e=b),f=a.substring(a.length-10,a.length-7),g=a.substring(a.length-7),e+f+g):10===a.length?b+a:a:d},c.prettyPhone=function(b){return b=c.normalizePhoneNumber(b),a.isString(b)&&(b=b.replace(/\s+/g,""),/^\+?\d+$/.test(b)&&("+"===b.charAt(0)&&(b=b.substring(1)),10<=b.length&&b.length<=11&&(10===b.length&&(b+="7"+b),11===b.length&&"8"===b[0]&&(b="7"+b.substring(1)),b="+"+b[0]+" ("+b.substring(1,4)+") "+b.substring(4,7)+" "+b.substring(7,9)+" "+b.substring(9)))),b},c.generateUUID=function(){var a=(new Date).getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return b.replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===b?c:7&c|8).toString(16)})};var e=/{{\s*\S+\s*}}/g,f=/^{{\s*(\S*)\s*}}$/;c.getStringVariables=function(b){var c=[];return b&&a.isString(b)&&a.each(b.match(e),function(a){var b=a.match(f)[1];b&&c.push(b)}),a.uniq(c.sort(),!0)},c.interpolateValueString=function(b,d){if(a.isString(d)){var e=c.getStringVariables(d);if(0===e.length)return d;var f=function(c){var e=new RegExp("{{\\s*"+c+"\\s*}}","g"),f=b.get(c);a.isNull(f)||a.isUndefined(f)||(f=f.toString()),d=d.replace(e,f||"")};if(1!==e.length)a.each(e,f);else{var g=a.first(e),h=b.get(g),i=new RegExp("{{\\s*"+g+"\\s*}}","g");if(d=d.replace(i,"{{"+g+"}}"),d==="{{"+g+"}}")return h;d=d.replace(i,h||"")}}return d},c.updateChromeWindowSize=function(){if(chrome&&chrome.app&&chrome.app.window){var a=chrome.app.window.current(),c=a.outerBounds.width,d=a.outerBounds.height,e=b("body"),f=e.width(),g=e.height();if(c!==f||d!==g)try{window.resizeTo(f,g)}catch(h){console.error("Unhandled exception in resizeCallWindow",h)}}}});